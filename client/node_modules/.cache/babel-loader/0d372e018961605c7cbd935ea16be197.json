{"ast":null,"code":"import Car from './car';\nimport Rent from './rent';\nimport fetch from 'node-fetch';\nconst baseURL = '/api';\n\nasync function isAuthenticated() {\n  let url = '/user';\n  const response = await fetch(baseURL + url);\n  const userJson = await response.json();\n  if (response.ok) return userJson;else {\n    let err = {\n      status: response.status,\n      errObj: userJson\n    };\n    throw err; //An object with the error coming from the server \n  }\n}\n\nasync function getCars() {\n  let url = '/cars';\n  const response = await fetch(baseURL + url);\n  const carsJson = await response.json();\n  return carsJson.map(c => new Car(c.id, c.model, c.brand, c.category, c.plate));\n}\n\nasync function getBrands() {\n  let url = '/brands';\n  const response = await fetch(baseURL + url);\n  const brandsJson = await response;\n  console.log(brandsJson);\n  return brandsJson.map(b => b.brand);\n}\n\nasync function getCategories() {\n  let url = '/categories';\n  const response = await fetch(baseURL + url);\n  const categoriesJson = await response.json();\n  return categoriesJson.map(c => c.category);\n}\n\nasync function getRents(user) {\n  let url = '/rents/' + user.id;\n  const response = await fetch(baseURL + url);\n  const rentsJson = await response.json();\n\n  if (response.ok) {\n    return rentsJson.map(r => new Rent(r.CarId, r.UserId, r.cost, r.StartDate, r.EndDate, r.invoice));\n  }\n}\n\nasync function deleteRent(rentInvoice) {\n  return new Promise((resolve, reject) => {\n    fetch(baseURL + '/rents/' + rentInvoice, {\n      method: 'DELETE'\n    }).then(response => {\n      if (response.ok) {\n        resolve(null);\n      } else {\n        // analyze the cause of error\n        response.json().then(obj => {\n          reject(obj);\n        }) //error msg in the response body\n        .catch(err => {\n          reject({\n            errors: [{\n              param: \"Server\",\n              msg: \"Cannot parse server response\"\n            }]\n          });\n        });\n      }\n    }).catch(err => {\n      reject({\n        errors: [{\n          param: \"Server\",\n          msg: \"Cannot communicate\"\n        }]\n      });\n    });\n  });\n}\n\nasync function addRent(rent) {\n  return new Promise((resolve, reject) => {\n    fetch(baseURL + '/rents', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(rent)\n    }).then(response => {\n      if (response.ok) {\n        resolve(null);\n      } else {\n        //analyze the cause of error\n        response.json().then(obj => {\n          reject(obj);\n        }) //error message in the response body\n        .catch(err => {\n          reject({\n            errors: [{\n              param: \"Application\",\n              masg: \"Cannot parse server response\"\n            }]\n          });\n        });\n      }\n    }).catch(err => {\n      reject({\n        errors: [{\n          param: \"Server\",\n          msg: \"Cannot communicate\"\n        }]\n      });\n    });\n  });\n}\n\nasync function userLogin(username, password) {\n  return new Promise((resolve, reject) => {\n    fetch(baseURL + '/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: username,\n        password: password\n      })\n    }).then(response => {\n      if (response.ok) {\n        response.json().then(user => {\n          resolve(user);\n        });\n      } else {\n        //analyze the cause of error\n        response.json().then(obj => {\n          reject(obj);\n        }) //error message in the response body\n        .catch(err => {\n          reject({\n            errors: [{\n              param: \"Application\",\n              masg: \"Cannot parse server response\"\n            }]\n          });\n        });\n      }\n    }).catch(err => {\n      reject({\n        errors: [{\n          param: \"Server\",\n          msg: \"Cannot communicate\"\n        }]\n      });\n    });\n  });\n}\n\nasync function userLogout() {\n  return new Promise((resolve, reject) => {\n    fetch(baseURL + '/logout', {\n      method: 'POST'\n    }).then(response => {\n      if (response.ok) {\n        resolve(null);\n      } else {\n        //analyze the cause of error\n        response.json().then(obj => {\n          reject(obj);\n        }) //error message in the response body\n        .catch(err => {\n          reject({\n            errors: [{\n              param: \"Application\",\n              masg: \"Cannot parse server response\"\n            }]\n          });\n        });\n      }\n    });\n  });\n} //API to export\n\n\nconst API = {\n  isAuthenticated,\n  getBrands,\n  getCars,\n  getCategories,\n  getRents,\n  addRent,\n  deleteRent,\n  userLogin,\n  userLogout\n};\nexport default API;","map":{"version":3,"sources":["/home/kali/Desktop/AW1/exam/client/src/API/API.js"],"names":["Car","Rent","fetch","baseURL","isAuthenticated","url","response","userJson","json","ok","err","status","errObj","getCars","carsJson","map","c","id","model","brand","category","plate","getBrands","brandsJson","console","log","b","getCategories","categoriesJson","getRents","user","rentsJson","r","CarId","UserId","cost","StartDate","EndDate","invoice","deleteRent","rentInvoice","Promise","resolve","reject","method","then","obj","catch","errors","param","msg","addRent","rent","headers","body","JSON","stringify","masg","userLogin","username","password","userLogout","API"],"mappings":"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","sourcesContent":["import Car from './car'\nimport Rent from './rent'\nimport fetch from 'node-fetch'\nconst baseURL = '/api';\n\n\n\nasync function isAuthenticated(){\n    let url = '/user';\n    const response = await fetch(baseURL+url);\n    const userJson = await response.json();\n    if(response.ok)\n        return userJson;\n    else{\n        let err = {status:response.status,errObj:userJson};\n        throw err;      //An object with the error coming from the server \n    }\n}\n\nasync function getCars(){\n    let url = '/cars';\n    const response = await fetch(baseURL+url);\n    const carsJson = await response.json();\n    \n        return carsJson.map((c) => new Car(c.id,c.model,c.brand,c.category,c.plate));\n    \n}\n\nasync function getBrands(){\n    let url = '/brands';\n    const response = await fetch(baseURL+url);\n    const brandsJson = await response;\n    console.log(brandsJson)\n    \n        return brandsJson.map((b) => b.brand) \n    \n}\n\n\nasync function getCategories(){\n    let url = '/categories';\n    const response = await fetch(baseURL+url);\n    const categoriesJson = await response.json();\n   \n        return categoriesJson.map((c) => c.category);\n    \n}\n\n\nasync function getRents(user){\n    let url = '/rents/'+user.id;\n    const response = await fetch(baseURL+url);\n    const rentsJson = await response.json();\n    if(response.ok){\n        return rentsJson.map((r) => new Rent(r.CarId,r.UserId,r.cost,r.StartDate,r.EndDate,r.invoice));\n    }\n}\n\nasync function deleteRent(rentInvoice){\n    return new Promise ((resolve,reject) => {\n        fetch(baseURL+'/rents/'+rentInvoice,{\n            method : 'DELETE'\n        }).then((response) => {\n            if(response.ok){\n                resolve(null);\n            } else {\n                // analyze the cause of error\n                response.json()\n                .then((obj) => {reject(obj)})  //error msg in the response body\n                .catch((err) => {reject({errors:[{param :\"Server\",msg: \"Cannot parse server response\"}] }) });\n            }\n        }).catch((err) => {reject ({errors: [{param: \"Server\",msg: \"Cannot communicate\"}] }) });\n    })\n}\n\n\nasync function addRent(rent){\n    return new Promise((resolve,reject) => {\n        fetch(baseURL+'/rents',{\n            method : 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(rent)\n        }).then((response) => {\n            if(response.ok){\n                resolve(null);\n            } else {\n                //analyze the cause of error\n                response.json()\n                .then((obj) => {reject(obj)})       //error message in the response body\n                .catch((err) => {reject({ errors : [{param :\"Application\", masg:\"Cannot parse server response\"}] }) });\n            }\n        }).catch((err) => {reject({ errors : [{param: \"Server\",msg:\"Cannot communicate\"}] }) });\n    })\n}\n\n\nasync function userLogin(username,password){\n    return new Promise ((resolve,reject) => {\n        fetch(baseURL+'/login',{\n            method: 'POST',\n            headers: {\n                'Content-Type' : 'application/json',\n            },\n            body: JSON.stringify({username: username, password: password}),\n        }).then((response) => {\n            if(response.ok){\n                response.json().then((user) => {\n                    resolve(user);\n                });\n            }else {\n                //analyze the cause of error\n                response.json()\n                .then((obj) => {reject(obj)})       //error message in the response body\n                .catch((err) => {reject({ errors : [{param :\"Application\", masg:\"Cannot parse server response\"}] }) });\n            }\n        }).catch((err) => {reject({ errors : [{param: \"Server\",msg:\"Cannot communicate\"}] }) });\n    })\n}\n\n\nasync function userLogout(){\n    return new Promise((resolve,reject) => {\n        fetch(baseURL+'/logout',{\n            method: 'POST',\n        }).then((response) => {\n            if(response.ok){\n                resolve(null);\n            } else {\n                //analyze the cause of error\n                response.json()\n                .then((obj) => {reject(obj)})       //error message in the response body\n                .catch((err) => {reject({ errors : [{param :\"Application\", masg:\"Cannot parse server response\"}] }) });\n            }\n        })\n    })\n}\n\n//API to export\nconst API = {isAuthenticated,getBrands,getCars,getCategories,getRents,addRent,deleteRent,userLogin,userLogout};\nexport default API;"]},"metadata":{},"sourceType":"module"}