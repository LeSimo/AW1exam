{"ast":null,"code":"const Rent = require('./rent');\n\nconst Car = require('./car');\n\nconst baseURL = '/api';\n/*\nasync function isAuthenticated() {\n    let url = '/user';\n    const response = await fetch(baseURL + url);\n    const userJson = await response.json();\n    if (response.ok)\n        return userJson;\n    else {\n        let err = { status: response.status, errObj: userJson };\n        throw err;      //An object with the error coming from the server \n    }\n}\n*/\n\nasync function getCars() {\n  let url = '/cars';\n  const response = await fetch(baseURL + url);\n  const carsJson = await response.json();\n  return carsJson.map(c => new Car(c.id, c.model, c.brand, c.category, c.plate));\n}\n\nasync function getBrands() {\n  let url = '/brands';\n  const response = await fetch(baseURL + url);\n  const brandsJson = await response.json();\n  return brandsJson.map(b => b.brand);\n}\n\nasync function getCategories() {\n  let url = '/categories';\n  const response = await fetch(baseURL + url);\n  const categoriesJson = await response.json();\n  return categoriesJson.map(c => c.category);\n}\n\nasync function getRentals(userID) {\n  let url = '/rentals/' + userID;\n  const response = await fetch(baseURL + url);\n  const rentalsJson = await response.json();\n\n  if (response.ok) {\n    return rentalsJson.map(r => new Rent(r.CarId, r.UserId, r.cost, r.StartDate, r.EndDate, r.invoice));\n  }\n}\n\nasync function deleteRent(rentInvoice) {\n  return new Promise((resolve, reject) => {\n    fetch(baseURL + '/rentals/' + rentInvoice, {\n      method: 'DELETE'\n    }).then(response => {\n      if (response.ok) {\n        resolve(null);\n      } else {\n        // analyze the cause of error\n        response.json().then(obj => {\n          reject(obj);\n        }) //error msg in the response body\n        .catch(err => {\n          reject({\n            errors: [{\n              param: \"Server\",\n              msg: \"Cannot parse server response\"\n            }]\n          });\n        });\n      }\n    }).catch(err => {\n      reject({\n        errors: [{\n          param: \"Server\",\n          msg: \"Cannot communicate\"\n        }]\n      });\n    });\n  });\n}\n\nasync function addRent(rent) {\n  return new Promise((resolve, reject) => {\n    fetch(baseURL + '/rentals', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(rent)\n    }).then(response => {\n      if (response.ok) {\n        resolve(null);\n      } else {\n        //analyze the cause of error\n        response.json().then(obj => {\n          reject(obj);\n        }) //error message in the response body\n        .catch(err => {\n          reject({\n            errors: [{\n              param: \"Application\",\n              masg: \"Cannot parse server response\"\n            }]\n          });\n        });\n      }\n    }).catch(err => {\n      reject({\n        errors: [{\n          param: \"Server\",\n          msg: \"Cannot communicate\"\n        }]\n      });\n    });\n  });\n}\n\nasync function userLogin(username, password) {\n  return new Promise((resolve, reject) => {\n    fetch(baseURL + '/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: username,\n        password: password\n      })\n    }).then(response => {\n      if (response.ok) {\n        response.json().then(user => {\n          resolve(user);\n        });\n      } else {\n        //analyze the cause of error\n        response.json().then(obj => {\n          reject(obj);\n        }) //error message in the response body\n        .catch(err => {\n          reject({\n            errors: [{\n              param: \"Application\",\n              masg: \"Cannot parse server response\"\n            }]\n          });\n        });\n      }\n    }).catch(err => {\n      reject({\n        errors: [{\n          param: \"Server\",\n          msg: \"Cannot communicate\"\n        }]\n      });\n    });\n  });\n}\n\nasync function userLogout() {\n  return new Promise((resolve, reject) => {\n    fetch(baseURL + '/logout', {\n      method: 'POST'\n    }).then(response => {\n      if (response.ok) {\n        resolve(null);\n      } else {\n        //analyze the cause of error\n        response.json().then(obj => {\n          reject(obj);\n        }) //error message in the response body\n        .catch(err => {\n          reject({\n            errors: [{\n              param: \"Application\",\n              masg: \"Cannot parse server response\"\n            }]\n          });\n        });\n      }\n    });\n  });\n}\n\nasync function availableCars(StartDate, EndDate) {\n  return new Promise((resolve, reject) => {\n    fetch(baseURL + '/available', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        StartDate: StartDate,\n        EndDate: EndDate\n      })\n    }).then(response => {\n      if (response.ok) {\n        response.json().then(carsId => {\n          resolve(carsId);\n        });\n      } else {\n        response.json().then(obj => {\n          reject(obj);\n        }) //error message in the response body\n        .catch(err => {\n          reject({\n            errors: [{\n              param: \"Application\",\n              masg: \"Cannot parse server response\"\n            }]\n          });\n        });\n      }\n    }).catch(err => {\n      reject({\n        errors: [{\n          param: \"Server\",\n          msg: \"Cannot communicate\"\n        }]\n      });\n    });\n  });\n}\n\nasync function stub(card, cost) {\n  return new Promise((resolve, reject) => {\n    fetch(baseURL + '/stub', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: card.name,\n        cc: card.cc,\n        cvv: card.cvv,\n        cost: cost\n      })\n    }).then(response => {\n      if (response.ok) {\n        response.json().then(obj => {\n          resolve(obj);\n        });\n      } else {\n        response.json().then(obj => {\n          reject(obj);\n        }) //error message in the response body\n        .catch(err => {\n          reject({\n            errors: [{\n              param: \"Application\",\n              masg: \"Cannot parse server response\"\n            }]\n          });\n        });\n      }\n    }).catch(err => {\n      reject({\n        errors: [{\n          param: \"Server\",\n          msg: \"Cannot communicate\"\n        }]\n      });\n    });\n  });\n} //API to export\n\n\nconst API = {\n  getBrands,\n  getCars,\n  getCategories,\n  getRentals,\n  addRent,\n  deleteRent,\n  userLogin,\n  userLogout,\n  availableCars,\n  stub\n};\nexport default API;","map":{"version":3,"sources":["/home/kali/Desktop/AW1/exam/client/src/API/API.js"],"names":["Rent","require","Car","baseURL","getCars","url","response","fetch","carsJson","json","map","c","id","model","brand","category","plate","getBrands","brandsJson","b","getCategories","categoriesJson","getRentals","userID","rentalsJson","ok","r","CarId","UserId","cost","StartDate","EndDate","invoice","deleteRent","rentInvoice","Promise","resolve","reject","method","then","obj","catch","err","errors","param","msg","addRent","rent","headers","body","JSON","stringify","masg","userLogin","username","password","user","userLogout","availableCars","carsId","stub","card","name","cc","cvv","API"],"mappings":"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","sourcesContent":["\nconst Rent = require('./rent')\nconst Car = require('./car')\nconst baseURL = '/api';\n\n\n/*\nasync function isAuthenticated() {\n    let url = '/user';\n    const response = await fetch(baseURL + url);\n    const userJson = await response.json();\n    if (response.ok)\n        return userJson;\n    else {\n        let err = { status: response.status, errObj: userJson };\n        throw err;      //An object with the error coming from the server \n    }\n}\n*/\nasync function getCars() {\n    let url = '/cars';\n    const response = await fetch(baseURL + url);\n    const carsJson = await response.json();\n    return carsJson.map((c) => new Car(c.id, c.model, c.brand, c.category, c.plate));\n\n}\n\nasync function getBrands() {\n    let url = '/brands';\n    const response = await fetch(baseURL + url);\n    const brandsJson = await response.json();\n    return brandsJson.map((b) => b.brand)\n\n}\n\n\nasync function getCategories() {\n    let url = '/categories';\n    const response = await fetch(baseURL + url);\n    const categoriesJson = await response.json();\n    return categoriesJson.map((c) => c.category);\n\n}\n\n\nasync function getRentals(userID) {\n    let url = '/rentals/' + userID;\n    const response = await fetch(baseURL + url);\n    const rentalsJson = await response.json();\n    if (response.ok) {\n        return rentalsJson.map((r) => new Rent(r.CarId, r.UserId, r.cost, r.StartDate, r.EndDate, r.invoice));\n    }\n}\n\nasync function deleteRent(rentInvoice) {\n    return new Promise((resolve, reject) => {\n        fetch(baseURL + '/rentals/' + rentInvoice, {\n            method: 'DELETE'\n        }).then((response) => {\n            if (response.ok) {\n                resolve(null);\n            } else {\n                // analyze the cause of error\n                response.json()\n                    .then((obj) => { reject(obj) })  //error msg in the response body\n                    .catch((err) => { reject({ errors: [{ param: \"Server\", msg: \"Cannot parse server response\" }] }) });\n            }\n        }).catch((err) => { reject({ errors: [{ param: \"Server\", msg: \"Cannot communicate\" }] }) });\n    })\n}\n\n\nasync function addRent(rent) {\n    return new Promise((resolve, reject) => {\n        fetch(baseURL + '/rentals', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(rent)\n        }).then((response) => {\n            if (response.ok) {\n                resolve(null);\n            } else {\n                //analyze the cause of error\n                response.json()\n                    .then((obj) => { reject(obj) })       //error message in the response body\n                    .catch((err) => { reject({ errors: [{ param: \"Application\", masg: \"Cannot parse server response\" }] }) });\n            }\n        }).catch((err) => { reject({ errors: [{ param: \"Server\", msg: \"Cannot communicate\" }] }) });\n    })\n}\n\n\nasync function userLogin(username, password) {\n    return new Promise((resolve, reject) => {\n        fetch(baseURL + '/login', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ username: username, password: password }),\n        }).then((response) => {\n            if (response.ok) {\n                response.json().then((user) => {\n                    resolve(user);\n                });\n            } else {\n                //analyze the cause of error\n                response.json()\n                    .then((obj) => { reject(obj) })       //error message in the response body\n                    .catch((err) => { reject({ errors: [{ param: \"Application\", masg: \"Cannot parse server response\" }] }) });\n            }\n        }).catch((err) => { reject({ errors: [{ param: \"Server\", msg: \"Cannot communicate\" }] }) });\n    })\n}\n\n\nasync function userLogout() {\n    return new Promise((resolve, reject) => {\n        fetch(baseURL + '/logout', {\n            method: 'POST',\n        }).then((response) => {\n            if (response.ok) {\n                resolve(null);\n            } else {\n                //analyze the cause of error\n                response.json()\n                    .then((obj) => { reject(obj) })       //error message in the response body\n                    .catch((err) => { reject({ errors: [{ param: \"Application\", masg: \"Cannot parse server response\" }] }) });\n            }\n        })\n    })\n}\n\n\nasync function availableCars(StartDate, EndDate) {\n    return new Promise((resolve, reject) => {\n        fetch(baseURL + '/available', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ StartDate: StartDate, EndDate: EndDate }),\n        }).then((response) => {\n            if (response.ok) {\n                response.json().then((carsId) => {\n                    resolve(carsId)\n                })\n            } else {\n                response.json()\n                    .then((obj) => { reject(obj) })       //error message in the response body\n                    .catch((err) => { reject({ errors: [{ param: \"Application\", masg: \"Cannot parse server response\" }] }) });\n            }\n        }).catch((err) => { reject({ errors: [{ param: \"Server\", msg: \"Cannot communicate\" }] }) });\n    })\n}\n\nasync function stub(card, cost) {\n    return new Promise((resolve, reject) => {\n        fetch(baseURL + '/stub', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ name: card.name, cc: card.cc, cvv: card.cvv, cost: cost }),\n        }).then((response) => {\n            if (response.ok) {\n                response.json().then((obj) => {\n                    resolve(obj)\n                })\n            } else {\n                response.json()\n                    .then((obj) => { reject(obj) })       //error message in the response body\n                    .catch((err) => { reject({ errors: [{ param: \"Application\", masg: \"Cannot parse server response\" }] }) });\n            }\n        }).catch((err) => { reject({ errors: [{ param: \"Server\", msg: \"Cannot communicate\" }] }) });\n    })\n}\n\n//API to export\nconst API = {  getBrands, getCars, getCategories, getRentals, addRent, deleteRent, userLogin, userLogout, availableCars, stub };\nexport default API;"]},"metadata":{},"sourceType":"module"}